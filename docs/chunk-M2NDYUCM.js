import{a as C}from"./chunk-6345ZAK3.js";import{g as x}from"./chunk-UOZMT72A.js";import{b as A,d as y,e as M,g as N,i as _,j as V,k as h,r as w,s as D,t as F,x as q}from"./chunk-DMKBKUFJ.js";import"./chunk-FJVERUXC.js";import{Fa as f,Ja as g,Na as e,Oa as t,Pa as i,Qa as b,Ta as S,U as s,W as u,Ya as v,Za as r,da as p,ea as c,gb as E}from"./chunk-ELDOSICJ.js";function G(l,o){l&1&&(e(0,"div",1),r(1,"V\xE9rifier que vous \xEAtes bien connect\xE9!"),t())}var j=class l{candSer=s(C);router=s(x);showError=!1;isSubmitted=!1;submitHandler(o,n){this.isSubmitted=!0;let a=new FormData;a.append("avatar",n.target[4].files[0]),this.candSer.uploadAvatar(a).subscribe({next:m=>{o.avatar=m.fileName,this.candSer.addCandidatAPI(o).subscribe({next:d=>{alert(d.message),this.router.navigateByUrl("/cv")},error:d=>{this.showError=!0,console.log("Erreur avec l'ajout d'un candidat")}})},error:m=>{console.log("Erreur avec l'upload d'un avatar")}})}static \u0275fac=function(n){return new(n||l)};static \u0275cmp=u({type:l,selectors:[["app-add"]],standalone:!0,features:[E],decls:20,vars:1,consts:[["f","ngForm"],[1,"alert","alert-danger"],[3,"ngSubmit"],["for",""],["ngModel","","required","","name","prenom","type","text",1,"form-control"],["ngModel","","required","","name","nom","type","text",1,"form-control"],["ngModel","","min","23","max","52","name","age","type","number",1,"form-control"],["ngModel","","name","profession","type","text",1,"form-control"],["type","file",1,"form-control"],["type","submit",1,"btn","btn-primary"]],template:function(n,a){if(n&1){let m=b();f(0,G,2,0,"div",1),e(1,"form",2,0),S("ngSubmit",function(P){p(m);let T=v(2);return c(a.submitHandler(T.value,P))}),e(3,"label",3),r(4,"Pr\xE9nom"),t(),i(5,"input",4),e(6,"label",3),r(7,"Nom"),t(),i(8,"input",5),e(9,"label",3),r(10,"Age"),t(),i(11,"input",6),e(12,"label",3),r(13,"Profession"),t(),i(14,"input",7),e(15,"label",3),r(16,"Avatar"),t(),i(17,"input",8),e(18,"button",9),r(19,"Ajouter Candidat"),t()()}n&2&&g(a.showError?0:-1)},dependencies:[q,V,A,h,y,M,F,D,w,_,N]})};export{j as AddComponent};
